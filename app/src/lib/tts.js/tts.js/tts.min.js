!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var r=n(5),a=o(r),i=n(12);/*! tts.js v0.1 github.com/sekaiamber/tts.js */
n(6),function(e){e.TTSManager=a["default"];for(var t in i.Speakers)i.Speakers.hasOwnProperty(t)&&(e[t]=i.Speakers[t])}(window)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(3),l=o(u),c=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.text=e,n}return i(t,e),t}(l["default"]);t["default"]=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){n(this,e)}return o(e,null,[{key:"log",value:function(e){window.devtools.open&&console.log("[TTS.js] "+e)}}]),e}();t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){n(this,e)}return o(e,[{key:"noop",value:function(){}},{key:"play",value:function(){throw new Error("Not yet implemented")}},{key:"pause",value:function(){throw new Error("Not yet implemented")}}]),e}();t["default"]=r},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(9),u=o(i),l=n(1),c=o(l),f=function(){function e(t){r(this,e),this.name=t}return a(e,[{key:"speak",value:function(e,t,n){t=t||this.noop,n=n||this.noop;try{e.play(t,n)}catch(o){n(o)}}},{key:"toString",value:function(){throw new Error("Not yet implemented")}},{key:"noop",value:function(){}}],[{key:"available",value:function(e){throw new Error("Not yet implemented")}}]),e}();t["default"]=f,f.Book=u["default"],f.Chapter=c["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(2),l=o(u),c=function(){function e(t){r(this,e),t=t.map(function(e,t){var n=null,o=[];return"function"==typeof e?n=e:"object"==("undefined"==typeof e?"undefined":a(e))&&(n=e.speaker,o=e.opt?e.opt:[]),o=[null].concat(o),{factory:n,speaker:new(n.bind.apply(n,o)),order:t,available:{base:!1,book:!1}}}),this.speakers=t,this.speaking=!1,this.speaker=null,this._availableCallbacks=[];for(var n=this,o=0;o<this.speakers.length;o++){var i=this.speakers[o];!function(e){e.factory.available(function(t){e.available=t,t.base&&((null==n.speaker||n.speaker&&n.speaker.order>e.order)&&(n.speaker=e),n.available())})}(i)}}return i(e,[{key:"noop",value:function(){}},{key:"available",value:function(e){if(e)this._availableCallbacks.push(e),this.speaker&&this.available();else for(var t=0;t<this._availableCallbacks.length;t++)this._availableCallbacks[t](this.speaker.available)}},{key:"speak",value:function(e,t,n){if(t=t||this.noop,n=n||this.noop,this.speaker){var o=new this.speaker.factory.Chapter(e),r=this.speaker.speaker;l["default"].log("speaking start: "+e),this.speaking=!0;var a=this;r.speak(o,function(){a.speaking=!1,l["default"].log("speaking end: "+e),t()},function(){a.speaking=!1,l["default"].log("an error occor"),l["default"].log("speaking end: "+e),n()})}}},{key:"speakBook",value:function(e,t,n,o){n=n||this.noop,t=t||this.noop,o=o||this.noop;var r=this;"function"==typeof n&&(n={onChapterEnded:n}),e=e.map(function(e){return new r.speaker.factory.Chapter(e)});var a=new this.speaker.factory.Book(e);for(var i in n)n.hasOwnProperty(i)&&(a[i]=n[i]);var u=this.speaker.speaker;l["default"].log("speaking book start"),this.speaking=!0,u.speak(a,function(){r.speaking=!1,l["default"].log("speaking book end"),t()},function(){r.speaking=!1,l["default"].log("an error occor"),l["default"].log("speaking book end"),o()})}}]),e}();t["default"]=c},function(e,t){"use strict";!function(){var e={open:!1,orientation:null},t=160,n=function(e,t){window.dispatchEvent(new CustomEvent("devtoolschange",{detail:{open:e,orientation:t}}))};setInterval(function(){var o=window.outerWidth-window.innerWidth>t,r=window.outerHeight-window.innerHeight>t,a=o?"vertical":"horizontal";window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized||o||r?(e.open&&e.orientation===a||n(!0,a),e.open=!0,e.orientation=a):(e.open&&n(!1,null),e.open=!1,e.orientation=null)},500),window.devtools=e}()},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(1),c=o(l),f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=new Audio("http://tts.baidu.com/text2audio?lan=zh&pid=101&ie=UTF-8&text="+encodeURI(e)+"&_="+(new Date).getTime()+"."+Math.random());return o.preload="auto",n.audio=o,n.audio.load(),n.source=n.audio,n}return i(t,e),u(t,[{key:"play",value:function(e,t){var n=this;e=e||this.noop,t=t||this.noop;try{this.audio.addEventListener("ended",function(){e()}),n.audio.play()}catch(o){return t(o)}}}]),t}(c["default"]);t["default"]=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(4),c=o(l),f=n(7),s=o(f),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"baidu"))}return i(t,e),u(t,null,[{key:"available",value:function(e){try{if("undefined"==typeof window.Audio)return e({base:!1,book:!1});var t=new Audio,n={base:!1,book:!1};"probably"===t.canPlayType("audio/mpeg")&&(n.base=!0,n.book=!0),t.addEventListener("canplaythrough",function(){n.base=!0,n.book=1==t.networkState&&4==t.readyState&&t.duration>0&&t.buffered.length>0&&t.buffered.end(0)-t.buffered.start(0)>0,e(n)},!1),t.addEventListener("error",function(){e({base:!1,book:!1})},!1),t.src="data:audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",t.load()}catch(o){return e({base:!1,book:!1})}}}]),t}(c["default"]);t["default"]=p,p.Chapter=s["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(2),c=o(l),f=n(3),s=o(f),p=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e=e||[];for(var o=0;o<e.length;o++){var i=e[o];n[o]=i}return n.length=e.length,n.onChapterEnded=n.noop,n.onChapterStart=n.noop,n}return i(t,e),u(t,[{key:"play",value:function(e,t){function n(t){o.onChapterStart(o[t].source,t),c["default"].log("speaking start: "+o[t].text),t==o.length-1?o[t].play(function(){c["default"].log("speaking end: "+o[t].text),o.onChapterEnded(o[t].source,t),e()}):o[t].play(function(){c["default"].log("speaking end: "+o[t].text),o.onChapterEnded(o[t].source,t),n(t+1)})}if(0==this.length)return void e();var o=this;n(0)}}]),t}(s["default"]);t["default"]=p},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(1),c=o(l),f=function(e){function t(e,n){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n=n||"zh-CN",o.lang=n,o.utterance=t._makeUtterance(o.lang),o.utterance.text=e,o.source=o.utterance,o}return i(t,e),u(t,[{key:"play",value:function(e,n,o){function r(){return window.speechSynthesis.speaking?void window.setTimeout(r,100):void e()}var a=this.utterance;console.log(n),n!=this.lang&&(a=t._makeUtterance(n),a.text=this.text),speechSynthesis.speak(a),r()}}]),t}(c["default"]);t["default"]=f,f._makeUtterance=function(e){var t=new SpeechSynthesisUtterance,n=window.speechSynthesis.getVoices().filter(function(t){return t.lang==e});return t.voice=n[0],t.voiceURI="native",t.volume=1,t.rate=1,t.pitch=1,t.lang=e,t}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(4),c=o(l),f=n(10),s=o(f),p=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"native"));return n.lang=e||t.lang,n}return i(t,e),u(t,[{key:"speak",value:function(e,t,n){t=t||this.noop,n=n||this.noop;try{e.play(t,this.lang,n)}catch(o){n(o)}}}],[{key:"available",value:function(e){if(!("speechSynthesis"in window&&"SpeechSynthesisUtterance"in window))return e({base:!1,book:!1});var n=window.speechSynthesis.getVoices().filter(function(e){return e.lang==t.lang});return n.length>0?e({base:!0,book:!0}):void(window.speechSynthesis.onvoiceschanged=function(){return n=window.speechSynthesis.getVoices().filter(function(e){return e.lang==t.lang}),e({base:n.length>0,book:n.length>0})})}}]),t}(c["default"]);t["default"]=p,p.Chapter=s["default"],p.lang="zh-CN"},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BaiduSpeaker=t.NativeSpeaker=t.Speakers=void 0;var r=n(11),a=o(r),i=n(8),u=o(i),l={NativeSpeaker:a["default"],BaiduSpeaker:u["default"]};t.Speakers=l,t.NativeSpeaker=a["default"],t.BaiduSpeaker=u["default"]}]);